<!-- gen-readme start - generated by https://github.com/jetify-com/devbox/ -->
## Getting Started
This project uses [devbox](https://github.com/jetify-com/devbox) to manage its development environment.

## Prerequisits:

Mount shared folder and enable bidirectional clipboard.
```sh
# Remove sudoer password
sudo visudo
# Add NOPASSWD to line "%sudo   ALL=(ALL:ALL) NOPASSWD: ALL"

# Devbox installtion and configuration prerequisits
sudo apt install curl bzip2 git -y

# Network prerequisits
sudo apt install cntlm redsocks -y
sudo cp /media/sf_sharedfolder/cntlm.conf /etc/cntlm.conf
sudo cp /media/sf_sharedfolder/redsocks.conf /etc/redsocks.conf
sudo cp /media/sf_sharedfolder/redsocks-iptables /usr/local/sbin/redsocks-iptables
sudo chmod +x /usr/local/sbin/redsocks-iptables
sudo mkdir -p /etc/systemd/system/redsocks.service.d
sudo vi /etc/systemd/system/redsocks.service.d/iptables.conf
# paste following content :
[Unit]
Requires=cntlm.service
After=cntlm.service
 
[Service]
ExecStartPost=/usr/local/sbin/redsocks-iptables set
ExecStop=/usr/local/sbin/redsocks-iptables unset

# terminal helpers
sudo apt install zsh -y
zsh
# type "0" and configure desired options and save
sudo chsh -s $(which zsh) antoine
# you may have to restart the OS

# restore previous VM config
cp -r /media/sf_sharedfolder/.zsh_history  /media/sf_sharedfolder/.zsh_aliases /media/sf_sharedfolder/.gitconfig \
    /media/sf_sharedfolder/.ssh /media/sf_sharedfolder/.gpg /media/sf_sharedfolder/.aws /media/sf_sharedfolder/.kube \
    ${HOME}
```

Add the following code in your .zshrc :
```sh
# Aliases
if [ -f ~/.zsh_aliases ]; then
  . ~/.zsh_aliases
fi
```

Install and init devbox:
```sh
curl -fsSL https://get.jetpack.io/devbox | bash
grep -qF 'devbox global shellenv' ~/.zshrc || echo 'eval "$(devbox global shellenv --init-hook)"' >> ~/.zshrc
```

Restore VScode config
```sh 
cp /media/sf_sharedfolder/.config/Code/User/settings.json ${HOME}/.config/Code/User/settings.json
```

## Scripts
Scripts are custom commands that can be run using this project's environment. This project has the following scripts:

* [install-hook-bash](#devbox-run-install-hook-bash)
* [install-hook-zsh](#devbox-run-install-hook-zsh)
* [install-starship-prompt](#devbox-run-install-starship-prompt)

## Environment

```sh
DEVBOX_GLOBAL_PREFIX="$HOME/.local/share/devbox/global/default/.devbox/nix/profile/default"
DEVBOX_GLOBAL_ROOT="$HOME/.local/share/devbox/global/current"
```

## Shell Init Hook
The Shell Init Hook is a script that runs whenever the devbox environment is instantiated. It runs 
on `devbox shell` and on `devbox run`.
```sh
export PS1='ðŸ“¦ devbox> '
echo 'Welcome to DevBox !
```

## Packages

* [awscli@latest](https://www.nixhub.io/packages/awscli)
* [eksctl@latest](https://www.nixhub.io/packages/eksctl)
* [kustomize@latest](https://www.nixhub.io/packages/kustomize)
* [kind@latest](https://www.nixhub.io/packages/kind)
* [vcluster@latest](https://www.nixhub.io/packages/vcluster)
* [stern@latest](https://www.nixhub.io/packages/stern)
* [argocd@latest](https://www.nixhub.io/packages/argocd)
* [aws-iam-authenticator@latest](https://www.nixhub.io/packages/aws-iam-authenticator)
* [kubernetes@1.26.3](https://www.nixhub.io/packages/kubernetes)
* [kubernetes-helm-wrapped@latest](https://www.nixhub.io/packages/kubernetes-helm-wrapped)
* [diskonaut@latest](https://www.nixhub.io/packages/diskonaut)
* [bat@latest](https://www.nixhub.io/packages/bat)
* [htop@latest](https://www.nixhub.io/packages/htop)
* [zoxide@latest](https://www.nixhub.io/packages/zoxide)
* [fzf@latest](https://www.nixhub.io/packages/fzf)
* [fzf-zsh@latest](https://www.nixhub.io/packages/fzf-zsh)
* [eza@latest](https://www.nixhub.io/packages/eza)
* [starship@latest](https://www.nixhub.io/packages/starship)
* [jq@latest](https://www.nixhub.io/packages/jq)
* [yq-go@latest](https://www.nixhub.io/packages/yq-go)
* [dive@latest](https://www.nixhub.io/packages/dive)
* [dos2unix@latest](https://www.nixhub.io/packages/dos2unix)
* [k9s@latest](https://www.nixhub.io/packages/k9s)
* [ngrok@latest](https://www.nixhub.io/packages/ngrok)
* [kubecolor@latest](https://www.nixhub.io/packages/kubecolor)

## Script Details

### devbox run install-hook-bash
```sh
echo adding 'devbox global shellenv' to ~/.bashrc
grep -qF 'devbox global shellenv' ~/.bashrc || echo 'eval "$(devbox global shellenv --init-hook)"' >> ~/.bashrc
tail -n 1 ~/.bashrc
```
&ensp;

### devbox run install-hook-zsh
```sh
echo adding 'devbox global shellenv' to ~/.zshrc
grep -qF 'devbox global shellenv' ~/.zshrc || echo 'eval "$(devbox global shellenv --init-hook)"' >> ~/.zshrc
tail -n 1 ~/.zshrc
```
&ensp;

### devbox run install-starship-prompt
```sh
if [ ! -f $HOME/.config/starship.toml ]
then
curl -fsSL https://raw.githubusercontent.com/yogeek/devbox-global/main/config/starship/starship.toml > $HOME/.config/starship.toml
fi
```
&ensp;



<!-- gen-readme end -->
